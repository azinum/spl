// memory.spl

fn memory_alloc(size : u64) -> ptr {
  const start : u64 0xffffffff;
  let prot : u64  or PROT_READ   PROT_WRITE;
  let flags : u64 or MAP_PRIVATE MAP_ANONYMOUS;
  let data : ptr memory_map(cast ptr start, size, prot, flags, 0, 0);
  data;
}

fn memory_free(data : ptr, size : u64) -> none {
  if neq cast u64 data NULL {
    memory_unmap(data, size);
  }
}
